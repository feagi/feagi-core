[package]
name = "feagi-io"
version = "0.0.1-beta.4"
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "FEAGI I/O System"

[features]
default = ["zmq-transport"]
zmq-transport = ["dep:zmq"] # Blocking, TCP-based transport
ws-transport = ["dep:tokio-tungstenite"] # Non-wasm WebSocket implementation
ws-transport-wasm = [] # WASM WebSocket implementation
udp-transport = []


#udp-transport = ["dep:tokio", "dep:async-trait", "dep:num_cpus"]  # Async, best-effort transport
#shm-transport = []                            # Shared memory (no extra deps, future)
#websocket-transport = ["udp-transport", "dep:tokio-tungstenite", "dep:futures-util"]  # WebSocket requires tokio, tungstenite, futures
#all-transports = ["zmq-transport", "udp-transport", "shm-transport", "websocket-transport"]
#connectome-serialization = ["bincode", "connectome-compression"]  # Connectome file I/O (types in feagi-npu-neural)
#connectome-compression = []  # LZ4 compression for connectome files (lz4 already in dependencies)

[dependencies]
#feagi-npu-burst-engine = { version = "0.0.1-beta.4", path = "../feagi-npu/burst-engine" }
#feagi-brain-development = { version = "0.0.1-beta.4", path = "../feagi-brain-development" }  # For CorticalAreaExt
#feagi-services = { version = "0.0.1-beta.4", path = "../feagi-services" }  # For GenomeService and ConnectomeService
#feagi-npu-neural = { version = "0.0.1-beta.4", path = "../feagi-npu/neural" }  # For types
# FEAGI data structures and serialization (for binary XYZP format)
feagi-structures.workspace = true
feagi-serialization = { workspace = true }

# Core dependencies (always required)
#serde = { version = "1.0", features = ["derive"] }
#serde_json = "1.0"
#anyhow = "1.0"
#base64 = "0.22"
#crossbeam = "0.8"
#parking_lot = "0.12"
#ahash.workspace = true
# thiserror = "1.0"
# lz4 = "1.28"  # LZ4 compression (used by multiple transports)
#tracing = { workspace = true }  # Structured logging
# url = "2.5.8" # for URL support

# Connectome serialization dependencies (optional, behind feature)
# bincode = { version = "1.3", optional = true }  # Fast binary serialization

# Optional transport-specific dependencies (consolidated from feagi-transports)
#tokio = { version = "1.0", features = ["full"], optional = true }  # Async runtime (UDP, WebSocket)
# async-trait = { version = "0.1", optional = true }  # Async traits
# num_cpus = { version = "1.16", optional = true }  # CPU detection for UDP

# futures-util = { version = "0.3", optional = true }  # WebSocket utilities

# Specific Dependencies
#ZMQ
zmq = { version = "0.10.0", optional = true }  # ZMQ transport

# Websocket (nonwasm)
tokio-tungstenite = { version = "0.28", optional = true }  # WebSocket transport

[dev-dependencies]
#tokio-test = "0.4.5"
#tempfile = "3.24"  # For connectome serialization tests


[lib]
name = "feagi_io"
path = "src/lib.rs"
